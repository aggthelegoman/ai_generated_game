<!DOCTYPE html>
<html lang="en">
<head>
    <!-- <link rel="icon" type="image/png" href="/favicons/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/favicons/favicon.svg" />
    <link rel="shortcut icon" href="/favicons/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-title" content="Gardnercraft" />
    <link rel="manifest" href="/favicons/site.webmanifest" /> -->

    <link rel="icon" type="image/png" href="https://aggthelegoman.github.io/ai_generated_game/favicons/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="https://aggthelegoman.github.io/ai_generated_game/favicons/favicon.svg" />
    <link rel="shortcut icon" href="https://aggthelegoman.github.io/ai_generated_game/favicons/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="https://aggthelegoman.github.io/ai_generated_game/favicons/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-title" content="Gardnercraft" />
    <link rel="manifest" href="https://aggthelegoman.github.io/ai_generated_game/favicons/site.webmanifest" />

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Space Shooter (AI generated game)</title>

    <link rel="stylesheet" href="dark_theme.css">

</head>
<body>
    <nav>
        <a href="https://wiki.gardnercraft.dedyn.io">
            <!-- <img src="/favicons/favicon.svg" alt="Logo" class="nav-logo"> -->
            <img src="https://aggthelegoman.github.io/ai_generated_game/favicons/favicon.svg" alt="Logo" class="nav-logo">
        </a>
        <div class="nav-links">
            <a href="index.html">Home</a>
            <!-- <a href="vibe.html">Vibe</a> -->
            <a href="chat_bot.html">cougar football chat bot</a>
            <a href="#" aria-current="page">AI Generated Game</a>
            <!-- <a href="https://wiki.gardnercraft.dedyn.io">Gardnercraft Wiki</a> -->
            <!-- <a href="pos.html">CSS Testing</a> -->
            <!-- <a href="svg.html">Portable Wii U Diagram</a> -->
            <a href="portable_wii_u_guide.html">Portable Wii U Diagram</a>
            <a href="resume.html">Resume</a>
            <a href="minecraft_facts.html">Minecraft Facts</a>
        </div>
    </nav>
    <div class="content_space">
        <p>Controls: Left/Right arrow key: move. Spacebar: shoot/restart game. Goal: avoid crashing into red obstacles, and destroy them for points</p>
    </div>
    <div id="gameContainer">
        <canvas id="gameCanvas"></canvas>
        <div id="gameOver">
            GAME OVER<br>
            <span style="font-size: 24px;">Press SPACE to restart</span>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const gameOverDiv = document.getElementById('gameOver');

        // Base dimensions (aspect ratio 4:3)
        const BASE_WIDTH = 800;
        const BASE_HEIGHT = 600;
        let scale = 1;

        // Game state
        let gameRunning = true;
        let score = 0;

        // Player
        const player = {
            x: BASE_WIDTH / 2 - 20,
            y: BASE_HEIGHT - 60,
            width: 40,
            height: 40,
            speed: 5,
            dx: 0
        };

        // Bullets
        let bullets = [];
        const bulletSpeed = 7;
        const bulletWidth = 4;
        const bulletHeight = 15;

        // Enemies
        let enemies = [];
        const enemySpeed = 2;
        let enemySpawnTimer = 0;
        const enemySpawnRate = 60;

        // Controls
        const keys = {};

        // Resize canvas to fit window
        function resizeCanvas() {
            const container = document.getElementById('gameContainer');
            const containerWidth = container.clientWidth;
            const containerHeight = container.clientHeight;

            // Calculate scale to fit container while maintaining aspect ratio
            const scaleX = containerWidth / BASE_WIDTH;
            const scaleY = containerHeight / BASE_HEIGHT;
            scale = Math.min(scaleX, scaleY, 1.5); // Cap at 1.5x for very large screens

            canvas.width = BASE_WIDTH * scale;
            canvas.height = BASE_HEIGHT * scale;

            // Scale the context
            ctx.setTransform(scale, 0, 0, scale, 0, 0);
        }

        // Initial resize
        resizeCanvas();

        // Resize on window resize
        window.addEventListener('resize', resizeCanvas);

        document.addEventListener('keydown', (e) => {
            keys[e.key] = true;

            if (e.key === ' ' && gameRunning) {
                e.preventDefault();
                shootBullet();
            }

            if (e.key === ' ' && !gameRunning) {
                e.preventDefault();
                restartGame();
            }
        });

        document.addEventListener('keyup', (e) => {
            keys[e.key] = false;
        });

        function movePlayer() {
            if (keys['ArrowLeft'] && player.x > 0) {
                player.x -= player.speed;
            }
            if (keys['ArrowRight'] && player.x + player.width < BASE_WIDTH) {
                player.x += player.speed;
            }
        }

        function drawPlayer() {
            ctx.fillStyle = '#0f0';
            ctx.fillRect(player.x, player.y, player.width, player.height);
            ctx.fillStyle = '#0a0';
            ctx.beginPath();
            ctx.moveTo(player.x + player.width / 2, player.y - 10);
            ctx.lineTo(player.x, player.y);
            ctx.lineTo(player.x + player.width, player.y);
            ctx.closePath();
            ctx.fill();
        }

        function shootBullet() {
            bullets.push({
                x: player.x + player.width / 2 - bulletWidth / 2,
                y: player.y,
                width: bulletWidth,
                height: bulletHeight
            });
        }

        function updateBullets() {
            bullets = bullets.filter(bullet => bullet.y > 0);
            bullets.forEach(bullet => {
                bullet.y -= bulletSpeed;
            });
        }

        function drawBullets() {
            ctx.fillStyle = '#ff0';
            bullets.forEach(bullet => {
                ctx.fillRect(bullet.x, bullet.y, bullet.width, bullet.height);
            });
        }

        function spawnEnemy() {
            const size = 30 + Math.random() * 20;
            enemies.push({
                x: Math.random() * (BASE_WIDTH - size),
                y: -size,
                width: size,
                height: size,
                speed: enemySpeed + Math.random() * 2
            });
        }

        function updateEnemies() {
            enemySpawnTimer++;
            if (enemySpawnTimer > enemySpawnRate) {
                spawnEnemy();
                enemySpawnTimer = 0;
            }

            enemies = enemies.filter(enemy => enemy.y < BASE_HEIGHT);
            enemies.forEach(enemy => {
                enemy.y += enemy.speed;
            });
        }

        function drawEnemies() {
            ctx.fillStyle = '#f00';
            enemies.forEach(enemy => {
                ctx.fillRect(enemy.x, enemy.y, enemy.width, enemy.height);
                ctx.fillStyle = '#a00';
                ctx.fillRect(enemy.x + 5, enemy.y + 5, enemy.width - 10, enemy.height - 10);
                ctx.fillStyle = '#f00';
            });
        }

        function checkCollisions() {
            bullets.forEach((bullet, bulletIndex) => {
                enemies.forEach((enemy, enemyIndex) => {
                    if (bullet.x < enemy.x + enemy.width &&
                        bullet.x + bullet.width > enemy.x &&
                        bullet.y < enemy.y + enemy.height &&
                        bullet.y + bullet.height > enemy.y) {
                        bullets.splice(bulletIndex, 1);
                        enemies.splice(enemyIndex, 1);
                        score += 10;
                    }
                });
            });

            enemies.forEach(enemy => {
                if (player.x < enemy.x + enemy.width &&
                    player.x + player.width > enemy.x &&
                    player.y < enemy.y + enemy.height &&
                    player.y + player.height > enemy.y) {
                    endGame();
                }
            });
        }

        function drawScore() {
            ctx.fillStyle = '#dbd8d4'; //color of score text
            ctx.font = '24px Arial';
            ctx.fillText(`Score: ${score}`, 10, 30);
        }

        function endGame() {
            gameRunning = false;
            gameOverDiv.style.display = 'block';
        }

        function restartGame() {
            gameRunning = true;
            gameOverDiv.style.display = 'none';
            score = 0;
            bullets = [];
            enemies = [];
            player.x = BASE_WIDTH / 2 - 20;
            enemySpawnTimer = 0;
        }

        function gameLoop() {
            ctx.clearRect(0, 0, BASE_WIDTH, BASE_HEIGHT);

            if (gameRunning) {
                movePlayer();
                updateBullets();
                updateEnemies();
                checkCollisions();

                drawPlayer();
                drawBullets();
                drawEnemies();
                drawScore();
            }

            requestAnimationFrame(gameLoop);
        }

        gameLoop();
    </script>
</body>
</html>